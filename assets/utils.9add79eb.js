import{cl as G,eU as z,dT as B,c1 as E,t as S,aO as N,au as J,aN as Z,bC as k,du as q,e_ as C,e$ as I,bt as P,eC as F,al as D,a as T,ay as V,az as y,f0 as j,aB as d,f1 as p,aA as K,f2 as L,f3 as X}from"./index.cdd966ee.js";import{f as U,g as $}from"./projectionSupport.627b4ce4.js";const H=new G({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),v=Object.freeze({}),M=new d,Q=new d,R=new d,l={esriGeometryPoint:p,esriGeometryPolyline:K,esriGeometryPolygon:L,esriGeometryMultipoint:X};function rt(t,a,r,n=t.hasZ,e=t.hasM){if(S(a))return null;const o=t.hasZ&&n,s=t.hasM&&e;if(r){const i=y(R,a,t.hasZ,t.hasM,"esriGeometryPoint",r,n,e);return p(i,o,s)}return p(a,o,s)}function st(t,a,r,n,e,o,s=a,i=r){var g,w,h,_,x,O;const c=a&&s,u=r&&i,f=T(n)?"coords"in n?n:n.geometry:null;if(S(f))return null;if(e){let m=V(Q,f,a,r,t,e,s,i);return o&&(m=y(R,m,c,u,t,o)),(w=(g=l[t])==null?void 0:g.call(l,m,c,u))!=null?w:null}if(o){const m=y(R,f,a,r,t,o,s,i);return(_=(h=l[t])==null?void 0:h.call(l,m,c,u))!=null?_:null}return j(M,f,a,r,s,i),(O=(x=l[t])==null?void 0:x.call(l,M,c,u))!=null?O:null}async function ot(t,a,r){const{outFields:n,orderByFields:e,groupByFieldsForStatistics:o,outStatistics:s}=t;if(n)for(let i=0;i<n.length;i++)n[i]=n[i].trim();if(e)for(let i=0;i<e.length;i++)e[i]=e[i].trim();if(o)for(let i=0;i<o.length;i++)o[i]=o[i].trim();if(s)for(let i=0;i<s.length;i++)s[i].onStatisticField&&(s[i].onStatisticField=s[i].onStatisticField.trim());return t.geometry&&!t.outSR&&(t.outSR=t.geometry.spatialReference),W(t,a,r)}async function W(t,a,r){var o;if(!t)return null;let{where:n}=t;if(t.where=n=n&&n.trim(),(!n||/^1 *= *1$/.test(n)||a&&a===n)&&(t.where=null),!t.geometry)return t;let e=await tt(t);if(t.distance=0,t.units=null,t.spatialRel==="esriSpatialRelEnvelopeIntersects"){const{spatialReference:s}=t.geometry;e=z(e),e.spatialReference=s}if(e){await U(e.spatialReference,r),e=Y(e,r);const s=(await B(E(e)))[0];if(S(s))throw v;const i="quantizationParameters"in t&&((o=t.quantizationParameters)==null?void 0:o.tolerance)||"maxAllowableOffset"in t&&t.maxAllowableOffset||0,c=i&&b(e,r)?{densificationStep:8*i}:void 0,u=s.toJSON(),f=await $(u,u.spatialReference,r,c);if(!f)throw v;f.spatialReference=r,t.geometry=f}return t}function b(t,a){if(!t)return!1;const r=t.spatialReference;return(N(t)||J(t)||Z(t))&&!k(r,a)&&!q(r,a)}function Y(t,a){const r=t.spatialReference;return b(t,a)&&N(t)?{spatialReference:r,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]}:t}async function tt(t){const{distance:a,units:r}=t,n=t.geometry;if(a==null||"vertexAttributes"in n)return n;const e=n.spatialReference,o=r?H.fromJSON(r):C(e),s=e&&(I(e)||P(e))?n:await U(e,F).then(()=>$(n,F));return(await it())(s.spatialReference,s,a,o)}async function it(){return(await D(()=>import("./geometryEngineJSON.3d6e7890.js"),["assets/geometryEngineJSON.3d6e7890.js","assets/geometryEngineBase.82b25ca5.js","assets/geometryEngineJSON.f9e9a36f.js","assets/json.879c9adc.js"])).geodesicBuffer}function lt(t){return t&&A in t?JSON.parse(JSON.stringify(t,et)):t}const A="_geVersion",et=(t,a)=>t!==A?a:void 0;export{lt as E,v as F,W as J,rt as b,st as v,ot as z};
